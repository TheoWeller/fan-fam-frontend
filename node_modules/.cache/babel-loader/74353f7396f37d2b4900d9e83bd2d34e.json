{"ast":null,"code":"var _jsxFileName = \"/Users/theoweller/Documents/dev/Flatiron/module-5/final-project/fan-fam2/frontend/fan-fam-frontend/src/components/ArtistViews/Map.js\";\nimport React, { Component } from 'react';\nimport population from './population.csv';\nimport { geo } from \"d3\";\nimport 'd3-geo-projection';\nd3.csv('./population.csv', function (err, data) {\n  var config = {\n    \"color1\": \"#d3e5ff\",\n    \"color2\": \"#08306B\",\n    \"stateDataColumn\": \"state_or_territory\",\n    \"valueDataColumn\": \"population_estimate_for_july_1_2013_number\"\n  };\n  var WIDTH = 800,\n      HEIGHT = 500;\n  var COLOR_COUNTS = 9;\n  var SCALE = 0.7;\n\n  function Interpolate(start, end, steps, count) {\n    var s = start,\n        e = end,\n        final = s + (e - s) / steps * count;\n    return Math.floor(final);\n  }\n\n  function Color(_r, _g, _b) {\n    var r, g, b;\n\n    var setColors = function (_r, _g, _b) {\n      r = _r;\n      g = _g;\n      b = _b;\n    };\n\n    setColors(_r, _g, _b);\n\n    this.getColors = function () {\n      var colors = {\n        r: r,\n        g: g,\n        b: b\n      };\n      return colors;\n    };\n  }\n\n  function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  }\n\n  function valueFormat(d) {\n    if (d > 1000000000) {\n      return Math.round(d / 1000000000 * 10) / 10 + \"B\";\n    } else if (d > 1000000) {\n      return Math.round(d / 1000000 * 10) / 10 + \"M\";\n    } else if (d > 1000) {\n      return Math.round(d / 1000 * 10) / 10 + \"K\";\n    } else {\n      return d;\n    }\n  }\n\n  var COLOR_FIRST = config.color1,\n      COLOR_LAST = config.color2;\n  var rgb = hexToRgb(COLOR_FIRST);\n  var COLOR_START = new Color(rgb.r, rgb.g, rgb.b);\n  rgb = hexToRgb(COLOR_LAST);\n  var COLOR_END = new Color(rgb.r, rgb.g, rgb.b);\n  var MAP_STATE = config.stateDataColumn;\n  var MAP_VALUE = config.valueDataColumn;\n  var width = WIDTH,\n      height = HEIGHT;\n  var valueById = d3.map();\n  var startColors = COLOR_START.getColors(),\n      endColors = COLOR_END.getColors();\n  var colors = [];\n\n  for (var i = 0; i < COLOR_COUNTS; i++) {\n    var r = Interpolate(startColors.r, endColors.r, COLOR_COUNTS, i);\n    var g = Interpolate(startColors.g, endColors.g, COLOR_COUNTS, i);\n    var b = Interpolate(startColors.b, endColors.b, COLOR_COUNTS, i);\n    colors.push(new Color(r, g, b));\n  }\n\n  var quantize = d3.scale.quantize().domain([0, 1.0]).range(d3.range(COLOR_COUNTS).map(function (i) {\n    return i;\n  }));\n  var path = d3.geo.path();\n  var svg = d3.select(\"#canvas-svg\").append(\"svg\").attr(\"width\", width).attr(\"height\", height);\n  d3.tsv(\"https://s3-us-west-2.amazonaws.com/vida-public/geo/us-state-names.tsv\", function (error, names) {\n    name_id_map = {};\n    id_name_map = {};\n\n    for (var i = 0; i < names.length; i++) {\n      name_id_map[names[i].name] = names[i].id;\n      id_name_map[names[i].id] = names[i].name;\n    }\n\n    data.forEach(function (d) {\n      var id = name_id_map[d[MAP_STATE]];\n      valueById.set(id, +d[MAP_VALUE]);\n    });\n    quantize.domain([d3.min(data, function (d) {\n      return +d[MAP_VALUE];\n    }), d3.max(data, function (d) {\n      return +d[MAP_VALUE];\n    })]);\n    d3.json(\"https://s3-us-west-2.amazonaws.com/vida-public/geo/us.json\", function (error, us) {\n      svg.append(\"g\").attr(\"class\", \"states-choropleth\").selectAll(\"path\").data(topojson.feature(us, us.objects.states).features).enter().append(\"path\").attr(\"transform\", \"scale(\" + SCALE + \")\").style(\"fill\", function (d) {\n        if (valueById.get(d.id)) {\n          var i = quantize(valueById.get(d.id));\n          var color = colors[i].getColors();\n          return \"rgb(\" + color.r + \",\" + color.g + \",\" + color.b + \")\";\n        } else {\n          return \"\";\n        }\n      }).attr(\"d\", path).on(\"mousemove\", function (d) {\n        var html = \"\";\n        html += \"<div class=\\\"tooltip_kv\\\">\";\n        html += \"<span class=\\\"tooltip_key\\\">\";\n        html += id_name_map[d.id];\n        html += \"</span>\";\n        html += \"<span class=\\\"tooltip_value\\\">\";\n        html += valueById.get(d.id) ? valueFormat(valueById.get(d.id)) : \"\";\n        html += \"\";\n        html += \"</span>\";\n        html += \"</div>\";\n        $(\"#tooltip-container\").html(html);\n        $(this).attr(\"fill-opacity\", \"0.8\");\n        $(\"#tooltip-container\").show();\n        var coordinates = d3.mouse(this);\n        var map_width = $('.states-choropleth')[0].getBoundingClientRect().width;\n\n        if (d3.event.layerX < map_width / 2) {\n          d3.select(\"#tooltip-container\").style(\"top\", d3.event.layerY + 15 + \"px\").style(\"left\", d3.event.layerX + 15 + \"px\");\n        } else {\n          var tooltip_width = $(\"#tooltip-container\").width();\n          d3.select(\"#tooltip-container\").style(\"top\", d3.event.layerY + 15 + \"px\").style(\"left\", d3.event.layerX - tooltip_width - 30 + \"px\");\n        }\n      }).on(\"mouseout\", function () {\n        $(this).attr(\"fill-opacity\", \"1.0\");\n        $(\"#tooltip-container\").hide();\n      });\n      svg.append(\"path\").datum(topojson.mesh(us, us.objects.states, function (a, b) {\n        return a !== b;\n      })).attr(\"class\", \"states\").attr(\"transform\", \"scale(\" + SCALE + \")\").attr(\"d\", path);\n    });\n  });\n});\n\nclass Map extends Component {\n  render() {\n    console.log(population);\n    return React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, \" Map \");\n  }\n\n}\n\nexport default Map;","map":{"version":3,"sources":["/Users/theoweller/Documents/dev/Flatiron/module-5/final-project/fan-fam2/frontend/fan-fam-frontend/src/components/ArtistViews/Map.js"],"names":["React","Component","population","geo","d3","csv","err","data","config","WIDTH","HEIGHT","COLOR_COUNTS","SCALE","Interpolate","start","end","steps","count","s","e","final","Math","floor","Color","_r","_g","_b","r","g","b","setColors","getColors","colors","hexToRgb","hex","result","exec","parseInt","valueFormat","d","round","COLOR_FIRST","color1","COLOR_LAST","color2","rgb","COLOR_START","COLOR_END","MAP_STATE","stateDataColumn","MAP_VALUE","valueDataColumn","width","height","valueById","map","startColors","endColors","i","push","quantize","scale","domain","range","path","svg","select","append","attr","tsv","error","names","name_id_map","id_name_map","length","name","id","forEach","set","min","max","json","us","selectAll","topojson","feature","objects","states","features","enter","style","get","color","on","html","$","show","coordinates","mouse","map_width","getBoundingClientRect","event","layerX","layerY","tooltip_width","hide","datum","mesh","a","Map","render","console","log"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport population from './population.csv'\nimport {geo} from \"d3\";\nimport 'd3-geo-projection';\n\nd3.csv('./population.csv', function(err, data) {\n\nvar config = {\"color1\":\"#d3e5ff\",\"color2\":\"#08306B\",\"stateDataColumn\":\"state_or_territory\",\"valueDataColumn\":\"population_estimate_for_july_1_2013_number\"}\n\nvar WIDTH = 800, HEIGHT = 500;\n\nvar COLOR_COUNTS = 9;\n\nvar SCALE = 0.7;\n\nfunction Interpolate(start, end, steps, count) {\n    var s = start,\n        e = end,\n        final = s + (((e - s) / steps) * count);\n    return Math.floor(final);\n}\n\nfunction Color(_r, _g, _b) {\n    var r, g, b;\n    var setColors = function(_r, _g, _b) {\n        r = _r;\n        g = _g;\n        b = _b;\n    };\n\n    setColors(_r, _g, _b);\n    this.getColors = function() {\n        var colors = {\n            r: r,\n            g: g,\n            b: b\n        };\n        return colors;\n    };\n}\n\nfunction hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n}\n\nfunction valueFormat(d) {\n  if (d > 1000000000) {\n    return Math.round(d / 1000000000 * 10) / 10 + \"B\";\n  } else if (d > 1000000) {\n    return Math.round(d / 1000000 * 10) / 10 + \"M\";\n  } else if (d > 1000) {\n    return Math.round(d / 1000 * 10) / 10 + \"K\";\n  } else {\n    return d;\n  }\n}\n\nvar COLOR_FIRST = config.color1, COLOR_LAST = config.color2;\n\nvar rgb = hexToRgb(COLOR_FIRST);\n\nvar COLOR_START = new Color(rgb.r, rgb.g, rgb.b);\n\nrgb = hexToRgb(COLOR_LAST);\nvar COLOR_END = new Color(rgb.r, rgb.g, rgb.b);\n\nvar MAP_STATE = config.stateDataColumn;\nvar MAP_VALUE = config.valueDataColumn;\n\nvar width = WIDTH,\n    height = HEIGHT;\n\nvar valueById = d3.map();\n\nvar startColors = COLOR_START.getColors(),\n    endColors = COLOR_END.getColors();\n\nvar colors = [];\n\nfor (var i = 0; i < COLOR_COUNTS; i++) {\n  var r = Interpolate(startColors.r, endColors.r, COLOR_COUNTS, i);\n  var g = Interpolate(startColors.g, endColors.g, COLOR_COUNTS, i);\n  var b = Interpolate(startColors.b, endColors.b, COLOR_COUNTS, i);\n  colors.push(new Color(r, g, b));\n}\n\nvar quantize = d3.scale.quantize()\n    .domain([0, 1.0])\n    .range(d3.range(COLOR_COUNTS).map(function(i) { return i }));\n\nvar path = d3.geo.path();\n\nvar svg = d3.select(\"#canvas-svg\").append(\"svg\")\n    .attr(\"width\", width)\n    .attr(\"height\", height);\n\nd3.tsv(\"https://s3-us-west-2.amazonaws.com/vida-public/geo/us-state-names.tsv\", function(error, names) {\n\nname_id_map = {};\nid_name_map = {};\n\nfor (var i = 0; i < names.length; i++) {\n  name_id_map[names[i].name] = names[i].id;\n  id_name_map[names[i].id] = names[i].name;\n}\n\ndata.forEach(function(d) {\n  var id = name_id_map[d[MAP_STATE]];\n  valueById.set(id, +d[MAP_VALUE]);\n});\n\nquantize.domain([d3.min(data, function(d){ return +d[MAP_VALUE] }),\n  d3.max(data, function(d){ return +d[MAP_VALUE] })]);\n\nd3.json(\"https://s3-us-west-2.amazonaws.com/vida-public/geo/us.json\", function(error, us) {\n  svg.append(\"g\")\n      .attr(\"class\", \"states-choropleth\")\n    .selectAll(\"path\")\n      .data(topojson.feature(us, us.objects.states).features)\n    .enter().append(\"path\")\n      .attr(\"transform\", \"scale(\" + SCALE + \")\")\n      .style(\"fill\", function(d) {\n        if (valueById.get(d.id)) {\n          var i = quantize(valueById.get(d.id));\n          var color = colors[i].getColors();\n          return \"rgb(\" + color.r + \",\" + color.g +\n              \",\" + color.b + \")\";\n        } else {\n          return \"\";\n        }\n      })\n      .attr(\"d\", path)\n      .on(\"mousemove\", function(d) {\n          var html = \"\";\n\n          html += \"<div class=\\\"tooltip_kv\\\">\";\n          html += \"<span class=\\\"tooltip_key\\\">\";\n          html += id_name_map[d.id];\n          html += \"</span>\";\n          html += \"<span class=\\\"tooltip_value\\\">\";\n          html += (valueById.get(d.id) ? valueFormat(valueById.get(d.id)) : \"\");\n          html += \"\";\n          html += \"</span>\";\n          html += \"</div>\";\n\n          $(\"#tooltip-container\").html(html);\n          $(this).attr(\"fill-opacity\", \"0.8\");\n          $(\"#tooltip-container\").show();\n\n          var coordinates = d3.mouse(this);\n\n          var map_width = $('.states-choropleth')[0].getBoundingClientRect().width;\n\n          if (d3.event.layerX < map_width / 2) {\n            d3.select(\"#tooltip-container\")\n              .style(\"top\", (d3.event.layerY + 15) + \"px\")\n              .style(\"left\", (d3.event.layerX + 15) + \"px\");\n          } else {\n            var tooltip_width = $(\"#tooltip-container\").width();\n            d3.select(\"#tooltip-container\")\n              .style(\"top\", (d3.event.layerY + 15) + \"px\")\n              .style(\"left\", (d3.event.layerX - tooltip_width - 30) + \"px\");\n          }\n      })\n      .on(\"mouseout\", function() {\n              $(this).attr(\"fill-opacity\", \"1.0\");\n              $(\"#tooltip-container\").hide();\n          });\n\n  svg.append(\"path\")\n      .datum(topojson.mesh(us, us.objects.states, function(a, b) { return a !== b; }))\n      .attr(\"class\", \"states\")\n      .attr(\"transform\", \"scale(\" + SCALE + \")\")\n      .attr(\"d\", path);\n});\n\n});\n});\n\nclass Map extends Component  {\n\n  render(){\n\n    console.log(population);\n    return (\n      <h1> Map </h1>\n    )\n  }\n}\nexport default Map\n"]},"metadata":{},"sourceType":"module"}